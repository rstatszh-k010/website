{
  "hash": "b68e2abd316ec13b25e6c3f68829cf88",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"{{< var md-03.titel >}}\"\nsubtitle: \"{{< var course.long-titel >}}\"\nauthor: \"Lars Schöbitz\"\ndate: \"2025-03-11\"\ndate-format: \"MMM D, YYYY\"\nformat: \n  revealjs: \n    theme: slides.scss\n    transition: fade\n    slide-number: true\n    chalkboard: true\nfooter: \"[{{< fa link >}} {{< var course.site-short >}}]({{< var course.site >}})\"\neditor: source\nexecute:\n  freeze: auto\nparams:\n    modul: 3\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n\n## Lernziele (für diese Woche)\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n1. Die Lernenden können fünf Funktionen aus dem R-Paket `dplyr` anwenden, um eine Teilmenge von Daten zur Verwendung in einer Tabelle oder einem Diagramm zu erzeugen.\n2. Die Lernenden können Funktionen aus dem R-Paket `dplyr` anwenden, um Daten mittels deskriptiver Statistik zusammenzufassen.\n:::\n\n\n\n# Datentransformation mit dplyr  {background-color=\"#4C326A\"}\n\n## Eine Grammatik der Datenmanipulation... {.smaller}\n\n... basierend auf den Konzepten von Funktionen als Verben, die Dataframes manipulieren\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n\n\n\n::: {.cell caption='dplyr is part of the tidyverse'}\n::: {.cell-output-display}\n![](img/md-03/dplyr-part-of-tidyverse.png){width=70%}\n:::\n:::\n\n\n\n:::\n\n::: {.column width=\"60%\"}\n\n- `filter`: wählt Zeilen aus, die den Kriterien entsprechen\n- `arrange`: Zeilen neu ordnen\n- `select`: Spalten nach Namen auswählen\n- `rename`: Spalten umbenennen\n- `mutate`: neue Variablen hinzufügen\n- `summarise`: Variablen auf Werte reduzieren\n- `group_by`: für gruppierte Operationen\n- ... (viele mehr)\n:::\n\n::::\n\n## dplyr rules\n\nRegeln der `dplyr`-Funktionen:\n\n::: {.incremental}\n\n- Das erste Argument ist immer ein Dataframe.\n- Nachfolgende Argumente sagen, was mit diesem Dataframe geschehen soll.\n- Gibt immer einen Dataframe zurück.\n- Nichts wird an Ort und Stelle verändert.\n\n:::\n\n## Funktionen & Argumente {auto-animate=\"true\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4\"}\nlibrary(dplyr)\n\nfilter(.data = gapminder, \n       year == 2007)\n```\n:::\n\n\n\n-   Funktion: `filter()`\n-   Argument: `.data =`\n-   Argumente, die folgen: `year == 2007` [Was ist mit den Daten gemacht wird]{.highlight-yellow}\n\n## Objekte {auto-animate=\"true\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4\"}\nlibrary(dplyr)\n\ngapminder_2007 <- filter(.data = gapminder, \n                            year == 2007)\n```\n:::\n\n\n\n-   Funktion: `filter()`\n-   Argument: `.data =`\n-   Argumente, die folgen: `year == 2007` [Was ist mit den Daten gemacht wird]{.highlight-yellow}\n-   Daten (Objekt): `gapminder_2007`\n\n## Operatoren {auto-animate=\"true\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4\"}\nlibrary(dplyr)\n\ngapminder_2007 <- gapminder |> \n  filter(year == 2007) \n```\n:::\n\n\n\n-   Funktion: `filter()`\n-   Argument: `.data =`\n-   Argumente, die folgen: `year == 2007` [Was ist mit den Daten gemacht wird]{.highlight-yellow}\n-   Daten (Objekt): `gapminder_2007`\n-   Zuweisungsoperator: `<-`\n-   Pipe Operator: `|>`\n\n## Grafik {auto-animate=\"true\" .smaller}\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3-4,6\"}\nlibrary(dplyr)\n\ngapminder_2007 <- gapminder |> \n  filter(year == 2007) \n\nggplot(data = gapminder_2007,\n       mapping = aes(x = continent,\n                     y = lifeExp,\n                     fill = continent)) +\n  geom_boxplot(outlier.shape = NA) \n```\n\n::: {.cell-output-display}\n![](md-03-datentransformation_files/figure-revealjs/unnamed-chunk-7-1.png){width=384}\n:::\n:::\n\n\n\n# Wir sind dran: Treibhausgasemissionen im Kanton Zürich {background-color=\"#4C326A\"}\n\n## Daten {.smallest}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreibhausgase <- read_csv(\"daten/ktzh-treibhausgase.csv\")\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(treibhausgase)\n```\n:::\n\n\n\n<br>\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n| jahr|hauptgruppe         |untergruppe   |thg |thg_agg | emission|\n|----:|:-------------------|:-------------|:---|:-------|--------:|\n| 1990|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1991|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1992|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1993|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1994|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n| 1995|Abwasser und Abfall |Abfalldeponie |CO2 |CO2eq   |        0|\n\n\n:::\n:::\n\n\n\n<br>\n\n. . .\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nncol(treibhausgase)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 6\n```\n\n\n:::\n:::\n\n\n\n<br>\n\n. . .\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnrow(treibhausgase)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1980\n```\n\n\n:::\n:::\n\n\n\n## Data {.smaller .scrollable}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntreibhausgase |> \n  distinct(hauptgruppe, untergruppe)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|hauptgruppe         |untergruppe                              |\n|:-------------------|:----------------------------------------|\n|Abwasser und Abfall |Abfalldeponie                            |\n|Abwasser und Abfall |Abwasserbehandlung                       |\n|Abwasser und Abfall |Abfallverbrennung                        |\n|Landwirtschaft      |Fermentation bei der Verdauung           |\n|Landwirtschaft      |Wirtschaftsdünger-Management             |\n|Landwirtschaft      |Landwirtschaftliche Böden                |\n|Verkehr             |Motorräder                               |\n|Verkehr             |Personenwagen                            |\n|Verkehr             |Linien-/Omnibusse                        |\n|Verkehr             |Reisebusse                               |\n|Verkehr             |Lastkraftwagen                           |\n|Verkehr             |Sattelzugmaschinen                       |\n|Landwirtschaft      |Land- und forstwirtschaftliche Maschinen |\n|Industrie           |Industrielle Fahrzeuge und Baumaschinen  |\n|Verkehr             |Schiene                                  |\n|Verkehr             |Schiff                                   |\n|Gebäude             |Heizkessel Dienstleistungen Heizöl       |\n|Gebäude             |Heizkessel Haushalte Heizöl              |\n|Gebäude             |Heizkessel Dienstleistungen Gas          |\n|Gebäude             |Heizkessel Haushalte Gas                 |\n|Abwasser und Abfall |KVA                                      |\n|Industrie           |Industrielle Prozesse nichtenergetisch   |\n|Industrie           |Industrielle Prozesse energetisch        |\n\n\n:::\n:::\n\n\n\n## Wir sind dran: md-03-uebungen\n\n::: task\n1. Öffne [posit.cloud](https://posit.cloud) in deinem Browser (verwende dein Lesezeichen).\n2. Öffne den rstatszh-k010 Arbeitsbereich (Workspace) für den Kurs.\n3. Klicke auf [Continue]{.highlight-yellow} neben [md-03-uebungen]{.highlight-yellow}.\n4. Suche im Dateimanager im Fenster unten rechts die Datei [`01-dplyr-wir.qmd`]{.highlight-yellow} und klicke darauf, um sie im Fenster oben links zu öffnen.\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_8115d4e1\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">20</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n## Pause machen\n\n[Bitte steh auf und beweg dich.]{.highlight-yellow} Lasst eure E-Mails in Frieden ruhen.\n\n![](img/md-03/get-up-and-move.png){width=\"50%\"}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_df05059f\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n::: footer\nBild erzeugt mit [DALL-E 3 by OpenAI](https://openai.com/blog/dall-e/)\n:::\n\n## Ihr seid dran: 02-dplyr-ihr.qmd\n\n::: task\n1. Öffne [posit.cloud](https://posit.cloud) in deinem Browser (verwende dein Lesezeichen).\n2. Öffne den rstatszh-k010 Arbeitsbereich (Workspace) für den Kurs.\n3. Klicke auf [Continue]{.highlight-yellow} neben [md-03-uebungen]{.highlight-yellow}.\n4. Suche im Dateimanager im Fenster unten rechts die Datei [`02-dplyr-ihr.qmd`]{.highlight-yellow} und klicke darauf, um sie im Fenster oben links zu öffnen.\n5. Folge den Anweisungen in der Datei.\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_32dfa5c8\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">25</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n## R Terminologie\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\ntreibhausgase_verkehr <- treibhausgase |> \n    filter(hauptgruppe == \"Verkehr\", jahr == 2022) \n```\n:::\n\n\n\n-   Funktion: `filter()`\n-   Argumente, die folgen: `hauptgruppe == \"Verkehr\"` [Was ist mit den Daten gemacht wird]{.highlight-yellow}\n-   Daten (Objekt): `treibhausgase_verkehr`\n-   Zuweisungsoperator: `<-`\n-   Pipe Operator: `|>`\n\n## Aufgabe: Verbundenes Streudiagram {.scrollable}\n\n\n\n{{< fa thumbs-up >}} Großartig für Zeitreihendaten {{< fa calendar >}}\n\n\n\n\n::: small\n\n1.  Nutze die Daten treibhausgase_gebaeude und die Funktion `ggplot()`, um ein verbundenmes Streudiagramm mit `geom_point()` und `geom_line()` zu erstellen.\n\nDefiniere folgende visuellen Eigenschaften:\n\n-   jahr auf der x-Achse;\n-   emission auf der y-Achse;\n-   untergruppe zur Einfärbung mit dem Argument `color = untergruppe` innerhalb von `aes()`\n\n3.  Ändere die Farben mit `scale_color_colorblind()`.\n\n:::\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\ntreibhausgase |> \n    filter(hauptgruppe == \"Gebäude\") |> \n    ggplot(aes(x = jahr, y = emission, color = untergruppe)) +\n    geom_point() +\n    geom_path() +\n    scale_color_colorblind()\n```\n\n::: {.cell-output-display}\n![](md-03-datentransformation_files/figure-revealjs/unnamed-chunk-20-1.png){width=100%}\n:::\n:::\n\n\n\n## Wir sind dran: 03-dplyr-wir.qmd\n\n::: task\n1. Öffne [posit.cloud](https://posit.cloud) in deinem Browser (verwende dein Lesezeichen).\n2. Öffne den rstatszh-k010 Arbeitsbereich (Workspace) für den Kurs.\n3. Klicke auf [Continue]{.highlight-yellow} neben [md-03-uebungen]{.highlight-yellow}.\n4. Suche im Dateimanager im Fenster unten rechts die Datei [`03-dplyr-wir.qmd`]{.highlight-yellow} und klicke darauf, um sie im Fenster oben links zu öffnen.\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_a871d5c5\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">25</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n## Pause machen\n\n[Bitte steh auf und beweg dich.]{.highlight-yellow} Lasst eure E-Mails in Frieden ruhen.\n\n![](img/md-03/get-up-and-move.png){width=\"50%\"}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_ce288144\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n::: footer\nBild erzeugt mit [DALL-E 3 by OpenAI](https://openai.com/blog/dall-e/)\n:::\n\n## Zeitpuffer: 03-dplyr-wir.qmd\n\n::: {.hand-purple-large style=\"text-align: center;\"}\nWelche Konzepte kann ich nochmals erklären?\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_a7c42c1a\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">15</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n# Zusatzaufgaben Modul 3 {background-color=\"#4C326A\"}\n\n## Modul 3 Dokumentation\n\n::: learn-more\n[rstatszh-k010.github.io/website/module/md-03.html](https://rstatszh-k010.github.io/website/module/md-03.html)\n\n\n\n```{=html}\n<iframe src=\"https://rstatszh-k010.github.io/website/module/md-03.html\" width=\"100%\" height=\"500\" style=\"border:2px solid #123233;\" title=\"Module 3 Dokumentation\"></iframe>\n```\n\n\n:::\n\n## Zusatzaufgaben Abgabedatum\n\n-   Abgabedatum: [Montag, 14. Oktober]{.highlight-yellow}\n-   Korrektur- und Feedbackphase bis zu: Donnerstag, 17. Oktober \n\n# Danke {background-color=\"#4C326A\"}\n\n## Danke! 🌻 \n\nFolien erstellt mit revealjs und Quarto: https://quarto.org/docs/presentations/revealjs/ \n\nAccess slides als [PDF auf GitHub](https://github.com/rstatszh-k010/website/raw/main/folien/md-03-datentransformation.pdf)\n\nAlle Materialien sind lizenziert unter [Creative Commons Attribution Share Alike 4.0 International](https://creativecommons.org/licenses/by-sa/4.0/).",
    "supporting": [
      "md-03-datentransformation_files/figure-revealjs"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}